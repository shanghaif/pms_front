webpackJsonp([58],{Zv2y:function(n,e,t){var i=t("ei/w");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("XkoO")("56c902d8",i,!0)},"ei/w":function(n,e,t){(n.exports=t("acE3")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/* 搜索条件栏样式开始 */\n.device-form[data-v-5bc104c0] {\r\n  background-color: #eef4fa;\r\n  border-radius: 5px 5px 0 0 ;\r\n  /* margin-bottom: 10px; */\r\n  height: 80px;\r\n  width: 100%;\r\n  padding: 0 10px 0 10px;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n  text-align: justify\n}\n.device-form-item[data-v-5bc104c0] {\r\n  margin-bottom: 0;\r\n  /* flex: 1 */\n}\n.device-form-item a[data-v-5bc104c0], .set-device-form-item a[data-v-5bc104c0] {\r\n  font-weight: 600;\r\n  font-size: 15px\n}\r\n/* 搜索条件栏样式结束 */\r\n/* 表格样式开始 */\n.redius[data-v-5bc104c0] {\r\n  /* width: 100%;\r\n  height: 90%;\r\n  min-height: 90%;\r\n  margin: 0 auto;\r\n  font-size: 14px;\r\n  overflow-y: auto */\n}\r\n/* 表格样式结束 */\r\n/* 增加修改配置页面样式开始 */\r\n/* .redius >>> .el-dialog {\r\n  height: 70%;\r\n}\r\n.redius >>> .el-dialog .el-dialog__body {\r\n  height: 80%;\r\n} */\n.set-device-form[data-v-5bc104c0] {\r\n  background-color: #eef4fa;\r\n  border-radius: 5px;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  width: 100%;\r\n  padding: 20px 0 0 1%;\r\n  /* height: 100%;\r\n  overflow-y: auto */\n}\n.set-device-form-item[data-v-5bc104c0] .el-form-item__content {\r\n  width: 50%;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: horizontal;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: row;\r\n          flex-direction: row;\n}\n.set-device-form-item[data-v-5bc104c0] .el-form-item__label {\r\n  min-width: 180px\n}\r\n/* .set-device-form-item a {\r\n  flex: 1;\r\n  min-width: 160px;\r\n  text-decoration: none\r\n} */\n.set-device-form-item[data-v-5bc104c0] .el-select, .set-device-form-item[data-v-5bc104c0] .el-cascader, .set-device-form-item[data-v-5bc104c0] .el-input, .set-device-form-item[data-v-5bc104c0] .el-input-number {\r\n  -webkit-box-flex: 2;\r\n      -ms-flex: 2;\r\n          flex: 2\n}\r\n/* 增加修改配置页面样式结束 */\r\n",""])},hFvH:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){var n=this;return{isDisabled:!0,rediusTableHeight:"",setRediusdataForm:{setOrganizationOptions:[],channelId:"",password:"",passwordtoo:""},rediusDataFormSetRule:{setOrganizationOptions:[{required:!0,message:"组织机构不能为空",trigger:"blur"}],channelId:[{required:!0,message:"通道标识不能为空",trigger:"blur"}],password:[{required:!0,message:"新密码不能为空",trigger:"blur"}],passwordtoo:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{validator:function(e,t,i){n.setRediusdataForm.password!==t?i(new Error("确认密码与新密码不一致")):i()},trigger:"blur"}]},dialogTitle:"",secrchRediusForm:{orgSelectedOptions:[],channelSelectedOptions:null},organizationOptions:[],channelOptions:[],rediusDataList:[],pageIndex:1,pageSize:10,totalPage:2,dataListSelections:[],addOrUpdateVisible:!1,dataListLoading:!1,agreementLoading:!1}},created:function(){this.rediusTableHeight=window.innerHeight-320},mounted:function(){this.getOrgLists(),this.getRediustList(),window.onresize=function(){document.getElementById("redius")&&(this.rediusTableHeight=window.innerHeight-320)}},methods:{dataFormSubmit:function(n){var e=this;this.$refs.setRediusdataForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$confirm("确定提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http({url:e.$http.adornUrl("/admin/tprotocolredismaster/"+(void 0==e.dialogTitle?"save":"update")),method:"post",data:e.$http.adornData({id:void 0==e.dialogTitle?null:e.dialogTitle,channelId:n.channelId,password:n.password})}).then(function(n){var t=n.data;t&&0===t.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){if(e.addOrUpdateVisible=!1,void 0==e.dialogTitle)e.rediusDataList.unshift(t.entity);else for(var n=0;n<e.rediusDataList.length;n++)e.rediusDataList[n].id==t.entity.id&&(e.rediusDataList[n].channelId=t.entity.channelId,e.rediusDataList[n].channelName=t.entity.channelName,e.rediusDataList[n].id=t.entity.id,e.rediusDataList[n].orgId=t.entity.orgId,e.rediusDataList[n].password=t.entity.password)}}):e.$message.error(t.msg)})})})},getOrgLists:function(){var n=this;this.$http({url:this.$http.adornUrl("/admin/tstation/org"),method:"post",data:this.$http.adornParams({})}).then(function(e){var t=e.data;t&&0===t.code&&(n.organizationOptions=t.list,0===n.secrchRediusForm.orgSelectedOptions.length&&(n.secrchRediusForm.orgSelectedOptions=JSON.parse(window.sessionStorage.getItem("userInfo")).orgId.split()))})},getChannel:function(){var n=this,e=this.addOrUpdateVisible?this.setRediusdataForm.setOrganizationOptions[this.setRediusdataForm.setOrganizationOptions.length-1]:this.secrchRediusForm.orgSelectedOptions[this.secrchRediusForm.orgSelectedOptions.length-1];this.agreementLoading=!0,this.$http({url:this.$http.adornUrl("/admin/tprotocolredismaster/channel"),method:"post",data:this.$http.adornParams({orgId:e})}).then(function(e){var t=e.data;t&&0===t.code&&(n.agreementLoading=!1,n.channelOptions=t.list)})},getRediustList:function(n){var e=this;n&&(this.pageIndex=1),this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/admin/tprotocolredismaster/list"),method:"post",data:this.$http.adornParams({page:this.pageIndex.toString(),limit:this.pageSize.toString(),orgId:0==this.secrchRediusForm.orgSelectedOptions.length?JSON.parse(window.sessionStorage.getItem("userInfo")).orgId:this.secrchRediusForm.orgSelectedOptions[this.secrchRediusForm.orgSelectedOptions.length-1],channelId:this.secrchRediusForm.channelSelectedOptions})}).then(function(n){var t=n.data;t&&0===t.code?(e.rediusDataList=t.page.list,e.totalPage=t.page.totalCount,e.pageIndex=t.page.currPage,e.pageSize=t.page.pageSize):(e.rediusDataList=[],e.totalPage=0),e.dataListLoading=!1})},sizeChangeHandle:function(n){this.pageSize=n,this.pageIndex=1,this.$options.methods.getRediustList.bind(this)()},currentChangeHandle:function(n){this.pageIndex=n,this.$options.methods.getRediustList.bind(this)()},selectionChangeHandle:function(n){this.dataListSelections=n},addRedius:function(n){var e=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){this.$refs.setRediusdataForm.resetFields(),this.setRediusdataForm.setOrganizationOptions=[]}),n?(this.isDisabled=!0,this.$options.methods.getChannel.bind(this)(),this.$http({url:this.$http.adornUrl("/admin/tstation/orgName"),method:"post",data:this.$http.adornData({orgId:n.orgId})}).then(function(n){var t=n.data;t&&0===t.code?e.setRediusdataForm.setOrganizationOptions=t.list:e.setRediusdataForm.setOrganizationOptions=[]}),this.$nextTick(function(){this.dialogTitle=n.id,this.setRediusdataForm.channelId=n.channelId.toString(),this.setRediusdataForm.password=n.password,this.setRediusdataForm.passwordtoo=n.password})):(this.dialogTitle=n,this.isDisabled=!1)},deleteRedius:function(n){var e=this,t=n?[n]:this.dataListSelections.map(function(n){return n.id});this.$confirm("确定删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http({url:e.$http.adornUrl("/admin/tprotocolredismaster/delete"),method:"post",data:e.$http.adornData(t,!1)}).then(function(n){var t=n.data;t&&0===t.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.getRediustList()}}):e.$message.error(t.msg)})}).catch(function(){})}}},a={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"redius",attrs:{id:"redius"}},[t("el-form",{staticClass:"device-form",attrs:{inline:!0,model:n.secrchRediusForm},nativeOn:{keyup:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13,e.key))return null;n.getRediustList()}}},[t("el-form-item",{staticClass:"device-form-item"},[t("el-cascader",{attrs:{options:n.organizationOptions,"change-on-select":"",placeholder:"选择组织机构"},model:{value:n.secrchRediusForm.orgSelectedOptions,callback:function(e){n.$set(n.secrchRediusForm,"orgSelectedOptions",e)},expression:"secrchRediusForm.orgSelectedOptions"}})],1),n._v(" "),t("el-form-item",{staticClass:"device-form-item"},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"选择通道标识",loading:n.agreementLoading},nativeOn:{click:function(e){n.getChannel()}},model:{value:n.secrchRediusForm.channelSelectedOptions,callback:function(e){n.$set(n.secrchRediusForm,"channelSelectedOptions",e)},expression:"secrchRediusForm.channelSelectedOptions"}},n._l(n.channelOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{staticClass:"device-form-item"},[t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.getRediustList("params")}}},[n._v("查询")]),n._v(" "),n.isAuth(n.OPTAUTH_ADD)?t("el-button",{attrs:{type:"success"},on:{click:function(e){n.addRedius()}}},[n._v("新增")]):n._e(),n._v(" "),n.isAuth(n.OPTAUTH_DELETE)?t("el-button",{attrs:{type:"danger",disabled:n.dataListSelections.length<=0},on:{click:function(e){n.deleteRedius()}}},[n._v("批量删除")]):n._e()],1)],1),n._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{"max-height":n.rediusTableHeight,data:n.rediusDataList,border:"",stripe:"","row-class-name":n.tableRowClassName},on:{"selection-change":n.selectionChangeHandle}},[t("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),n._v(" "),t("el-table-column",{attrs:{type:"index","header-align":"center",align:"center",width:"80",label:"序号"}}),n._v(" "),t("el-table-column",{attrs:{prop:"channelName","header-align":"center",align:"center","min-width":"120",label:"通道名称"}}),n._v(" "),t("el-table-column",{attrs:{prop:"password","header-align":"center",align:"center","min-width":"120",label:"redis登陆密码"}}),n._v(" "),t("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"150",label:"操作"},scopedSlots:n._u([{key:"default",fn:function(e){return[n.isAuth(n.OPTAUTH_UPDATE)?t("el-button",{attrs:{plain:!0,type:"warning",size:"mini"},on:{click:function(t){n.addRedius(e.row)}}},[n._v("修改")]):n._e(),n._v(" "),n.isAuth(n.OPTAUTH_DELETE)?t("el-button",{attrs:{plain:!0,type:"danger",size:"mini"},on:{click:function(t){n.deleteRedius(e.row.id)}}},[n._v("删除")]):n._e()]}}])})],1),n._v(" "),t("el-pagination",{attrs:{"current-page":n.pageIndex,"page-sizes":[10,20,50,100],"page-size":n.pageSize,total:n.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":n.sizeChangeHandle,"current-change":n.currentChangeHandle}}),n._v(" "),t("el-dialog",{attrs:{title:void 0==n.dialogTitle?"新  增":"修  改","close-on-click-modal":!1,visible:n.addOrUpdateVisible,center:"center"},on:{"update:visible":function(e){n.addOrUpdateVisible=e}}},[t("el-form",{ref:"setRediusdataForm",staticClass:"set-device-form",attrs:{model:n.setRediusdataForm,"label-width":"80px",rules:n.rediusDataFormSetRule},nativeOn:{keyup:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13,e.key))return null;n.dataFormSubmit()}}},[t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"组织机构",prop:"setOrganizationOptions"}},[t("el-cascader",{attrs:{options:n.organizationOptions,"change-on-select":"",disabled:n.isDisabled},model:{value:n.setRediusdataForm.setOrganizationOptions,callback:function(e){n.$set(n.setRediusdataForm,"setOrganizationOptions",e)},expression:"setRediusdataForm.setOrganizationOptions"}})],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{prop:"channelId",label:"通道名称"}},[t("el-select",{attrs:{placeholder:"请选择"},nativeOn:{click:function(e){n.getChannel()}},model:{value:n.setRediusdataForm.channelId,callback:function(e){n.$set(n.setRediusdataForm,"channelId",e)},expression:"setRediusdataForm.channelId"}},n._l(n.channelOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"redis登陆密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入密码",type:"password",clearable:""},model:{value:n.setRediusdataForm.password,callback:function(e){n.$set(n.setRediusdataForm,"password",e)},expression:"setRediusdataForm.password"}})],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"再次输入登陆密码",prop:"passwordtoo"}},[t("el-input",{attrs:{placeholder:"请输入密码",type:"password",clearable:""},model:{value:n.setRediusdataForm.passwordtoo,callback:function(e){n.$set(n.setRediusdataForm,"passwordtoo",e)},expression:"setRediusdataForm.passwordtoo"}})],1)],1),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.addOrUpdateVisible=!1}}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.dataFormSubmit(n.setRediusdataForm)}}},[n._v("确定")])],1)],1)],1)},staticRenderFns:[]};var s=t("46Yf")(i,a,!1,function(n){t("Zv2y")},"data-v-5bc104c0",null);e.default=s.exports}});