webpackJsonp([60],{LBIj:function(n,e,t){var a=t("Nvmz");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("XkoO")("4f1a31f4",a,!0)},Nvmz:function(n,e,t){(n.exports=t("acE3")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/* 搜索条件栏样式开始 */\n.device-form[data-v-ee8b1d22] {\r\n /*  background-color: #eef4fa; */\r\n  border-radius: 5px 5px 0 0 ;\r\n  /* margin-bottom: 10px; */\r\n  height: 80px;\r\n  width: 100%;\r\n  padding: 0 10px 0 10px;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n  text-align: justify\n}\n.device-form-item[data-v-ee8b1d22] {\r\n  margin-bottom: 0;\r\n  /* flex: 1 */\n}\n.set-device-form-item[data-v-ee8b1d22] {\r\n  font-weight: 700;\r\n  font-size: 15px\n}\r\n/* 搜索条件栏样式结束 */\r\n/* 表格样式开始 */\n.connect-list[data-v-ee8b1d22] {\r\n  /* width: 100%;\r\n  height: 90%;\r\n  min-height: 90%;\r\n  margin: 0 auto;\r\n  font-size: 14px;\r\n  overflow-y: auto */\n}\r\n/* 表格样式结束 */\r\n/* 增加修改配置页面样式开始 */\r\n/* .comm-connect >>> .el-dialog {\r\n  height: 70%;\r\n}\r\n.comm-connect >>> .el-dialog .el-dialog__body {\r\n  height: 80%;\r\n} */\n.set-device-form[data-v-ee8b1d22] {\r\n  background-color: #eef4fa;\r\n  border-radius: 5px;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  width: 100%;\r\n  padding: 20px 0 0 1%\r\n  /* height: 100%;\r\n  overflow-y: auto */\n}\n.set-device-form-item[data-v-ee8b1d22] .el-form-item__content {\r\n  width: 50%;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: horizontal;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: row;\r\n          flex-direction: row;\n}\r\n/* .set-device-form-item a {\r\n  flex: 1;\r\n  min-width: 150px;\r\n  text-decoration: none\r\n} */\n.set-device-form-item[data-v-ee8b1d22] .el-select, .set-device-form-item[data-v-ee8b1d22] .el-cascader, .set-device-form-item[data-v-ee8b1d22] .el-input{\r\n  -webkit-box-flex: 3;\r\n      -ms-flex: 3;\r\n          flex: 3\n}\n.set-device-form-item[data-v-ee8b1d22] .el-form-item__label {\r\n  min-width: 180px\n}\n.set-protocolType-form[data-v-ee8b1d22] {\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  padding: 20px 0 0 0;\r\n  background-color: #DCDFE6\n}\n.set-protocolType-form-item[data-v-ee8b1d22] .el-form-item__content{\r\n  width: 50%;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: horizontal;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: row;\r\n          flex-direction: row;\n}\n.set-protocolType-form-item[data-v-ee8b1d22] .el-form-item__label {\r\n  min-width: 150px\n}\n.set-protocolType-form-item[data-v-ee8b1d22] .el-select,  .set-protocolType-form-item[data-v-ee8b1d22] .el-input{\r\n  -webkit-box-flex: 3;\r\n      -ms-flex: 3;\r\n          flex: 3;\r\n  margin-bottom: 1%\n}\n.set-protocolType-form-item[data-v-ee8b1d22] label + .el-form-item__content {\r\n  padding-top: 1%\n}\n.set-protocolType-form-item[data-v-ee8b1d22] .el-radio {\r\n  -webkit-box-flex: 2;\r\n      -ms-flex: 2;\r\n          flex: 2;\r\n  -webkit-box-pack: center;\r\n      -ms-flex-pack: center;\r\n          justify-content: center;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\n}\r\n/* .comm-connect >>> table thead tr th:nth-last-child(1) {\r\n  border-right: none\r\n} */\r\n/* 增加修改配置页面样式结束 */\n.istyle[data-v-ee8b1d22] {\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n  color: #3397ff\n}\n.comm-connect[data-v-ee8b1d22] .el-pager li.active {\r\n  background-color: #33a7fe;\r\n  color: #fff;\r\n  font-size: 16px;\r\n  border-radius: 100%\n}\n.comm-connect[data-v-ee8b1d22] .el-pager li {\r\n  min-width: 30px;\r\n  height: 25px;\r\n  line-height: 25px\n}\n.comm-connect[data-v-ee8b1d22] .el-table td, .comm-connect[data-v-ee8b1d22] .el-table th {\r\n  padding: 0\n}\n.comm-connect[data-v-ee8b1d22] .el-dialog--center {\r\n  margin-top: 5vh !important\n}\r\n",""])},REkq:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("rVsN"),o=t.n(a),l=t("E4LH"),r={data:function(){var n=this,e=function(n,e,t){Object(l.b)(e)?t():t(new Error("IP地址不正确"))},t=function(n,e,t){e>65535||e<0?t(new Error("地址超出1~65535范围")):t()};return{setProtocolTypeOptions:[{value:"0",label:"104主站协议"},{value:"1",label:"104从站协议"},{value:"2",label:"Redis主站协议"},{value:"3",label:"Redis从站协议"}],connectTableHeight:"",protocolTypeOptions:[],connectModelOptions:[{value:"1",label:"主"},{value:"2",label:"从"}],connectTypeOptions:[{value:"0",label:"redis-client"},{value:"1",label:"TCP-server"},{value:"2",label:"TCP-client"},{value:"3",label:"RS485-TCP"},{value:"4",label:"UDP"}],dataFormSet:{setOrganizationOptions:[],channelName:null,channelCode:null,connectFlag:null,connectType:null,protocolId:null,localConnectUrl:null,localPort:null,pollingInteval:null,frontLogo:null},dataFormSetRule:{localConnectUrl:[{required:!0,message:"本地IP不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],remoteConnectUrl:[{required:!0,message:"对侧IP不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],setOrganizationOptions:[{required:!0,message:"组织机构不能为空",trigger:"blur"}],channelName:[{required:!0,message:"通道名称不能为空",trigger:"blur"},{validator:function(e,t,a){console.log(t),t&&n.dataFormSet.channelName!=n.saveRowDataChannelName&&""!=n.dataFormSet.channelName?n.$http({url:n.$http.adornUrl("/base/tchannel/checkChannelName?channelName="+t),method:"get",params:n.$http.adornParams()}).then(function(n){var e=n.data;e&&0===e.code&&!1===e.data.status?a(new Error(e.data.msg)):a()}):a()},trigger:"blur"}],channelCode:[{required:!0,message:"通道编号不能为空",trigger:"blur"},{validator:function(e,t,a){console.log(t),t&&n.dataFormSet.channelCode!=n.saveRowDataChannelCode&&""!=n.dataFormSet.channelCode?n.$http({url:n.$http.adornUrl("/base/tchannel/checkChannelCode?channelCode="+t),method:"get",params:n.$http.adornParams()}).then(function(n){var e=n.data;e&&0===e.code&&!1===e.data.status?a(new Error(e.data.msg)):a()}):a()},trigger:"blur"}],connectFlag:[{required:!0,message:"连接标识不能为空",trigger:"blur"},{validator:function(e,t,a){console.log(t),t&&n.dataFormSet.connectFlag!=n.saveRowDataConnectFlag&&""!=n.dataFormSet.connectFlag?n.$http({url:n.$http.adornUrl("/base/tchannel/checkConnectFlag?connectFlag="+t),method:"get",params:n.$http.adornParams()}).then(function(n){var e=n.data;e&&0===e.code&&!1===e.data.status?a(new Error(e.data.msg)):a()}):a()},trigger:"blur"}],channelAddress:[{required:!0,message:"通道物理地址不能为空",trigger:"blur"}],localPort:[{required:!0,message:"本地端口不能为空",trigger:"blur"},{validator:t,trigger:"blur"}],remotePort:[{required:!0,message:"对侧端口不能为空",trigger:"blur"},{validator:t,trigger:"blur"}],connectType:[{required:!0,message:"通讯类型不能为空",trigger:"blur"}],protocolId:[{required:!0,message:"协议名称不能为空",trigger:"blur"}],frontLogo:[{required:!0,message:"前置标识不能为空",trigger:"blur"}]},dialogTitle:"",secrchDataForm:{orgSelectedOptions:[],connectTypeSelectedOptions:null,protocolTypeSelectedOptions:null,channelName:null},organizationOptions:[],channelOptions:[],connectDataList:[],pageIndex:1,pageSize:10,totalPage:50,dataListSelections:[],addOrUpdateVisible:!1,dataListLoading:!1,channelLoading:!1,connectTypeLoading:!1,saveRowDataChannelName:null,saveRowDataConnectFlag:null,saveRowDataChannelCode:null}},created:function(){this.connectTableHeight=window.innerHeight-320},watch:{},mounted:function(){this.getOrgLists(),this.getCommconnectList(),window.onresize=function(){document.getElementById("commConnect")&&(this.connectTableHeight=window.innerHeight-320)}},methods:{changeConnectModel:function(n){this.dataFormSet.protocolId=null},getProtocolTypeOptions:function(){var n=this;console.log(this.addOrUpdateVisible),this.$http({url:this.$http.adornUrl("/admin/tprotocol/protocolname"),method:"post",data:this.$http.adornParams({})}).then(function(e){var t=e.data;t&&0===t.code&&(console.log(t.data),n.protocolTypeOptions=t.data)})},dataFormSubmit:function(n){var e=this;console.log(n),console.log(this.saveRowData),o.a.all([this.checkChannelName(),this.checkConnectFlag(),this.checkChannelCode()]).then(function(t){console.log(t),(t&&3==t.length&&t[0]&&t[1]&&t[2]||t&&1==t[0]&&1==t[1]&&1==t[2])&&e.$refs.dataFormSet.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$confirm("确定提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http({url:e.$http.adornUrl("/base/tchannel/"+(void 0==e.dialogTitle?"save":"update")),method:"post",data:e.$http.adornData({channelId:void 0==e.dialogTitle?null:e.dialogTitle,orgId:n.setOrganizationOptions[n.setOrganizationOptions.length-1],channelName:n.channelName,channelCode:n.channelCode,connectFlag:n.connectFlag,connectType:n.connectType,protocolId:n.protocolId,localConnectUrl:n.localConnectUrl,localPort:n.localPort,pollingInteval:n.pollingInteval,scadaNo:n.frontLogo})}).then(function(n){var t=n.data;t&&0===t.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){if(e.addOrUpdateVisible=!1,void 0==e.dialogTitle)e.connectDataList.unshift(t.entity);else for(var n=0;n<e.connectDataList.length;n++)e.connectDataList[n].channelId==t.entity.channelId&&(e.connectDataList[n].orgId=t.entity.orgId,e.connectDataList[n].channelName=t.entity.channelName,e.connectDataList[n].channelCode=t.entity.channelCode,e.connectDataList[n].connectFlag=t.entity.connectFlag,e.connectDataList[n].connectType=t.entity.connectType,e.connectDataList[n].protocolName=t.entity.protocolName,e.connectDataList[n].localConnectUrl=t.entity.localConnectUrl,e.connectDataList[n].localPort=t.entity.localPort,e.connectDataList[n].pollingInteval=t.entity.pollingInteval,e.connectDataList[n].scadaNo=t.entity.scadaNo)}}):e.$message.error(t.msg)})})})})},checkChannelName:function(){var n=this;return new o.a(function(e,t){n.saveRowDataChannelName!=n.dataFormSet.channelName?n.$http({url:n.$http.adornUrl("/base/tchannel/checkChannelName?channelName="+n.dataFormSet.channelName),method:"get",params:n.$http.adornParams()}).then(function(t){var a=t.data;a&&0===a.code&&!0===a.data.status?e(a):a&&0===a.code&&!1===a.data.status&&n.$message({message:"通道名称已存在",type:"success",duration:1500,onClose:function(){}})}):e("1")})},checkConnectFlag:function(){var n=this;return new o.a(function(e,t){n.saveRowDataConnectFlag!=n.dataFormSet.connectFlag?n.$http({url:n.$http.adornUrl("/base/tchannel/checkConnectFlag?connectFlag="+n.dataFormSet.connectFlag),method:"get",params:n.$http.adornParams()}).then(function(t){var a=t.data;a&&0===a.code&&!0===a.data.status?e(a):a&&0===a.code&&!1===a.data.status&&n.$message({message:"通道标识已存在",type:"success",duration:1500,onClose:function(){}})}):e("1")})},checkChannelCode:function(){var n=this;return new o.a(function(e,t){n.saveRowDataChannelCode!=n.dataFormSet.channelCode?n.$http({url:n.$http.adornUrl("/base/tchannel/checkChannelCode?channelCode="+n.dataFormSet.channelCode),method:"get",params:n.$http.adornParams()}).then(function(t){var a=t.data;a&&0===a.code&&!0===a.data.status?e(a):a&&0===a.code&&!1===a.data.status&&n.$message({message:"通道编号已存在",type:"success",duration:1500,onClose:function(){}})}):e("1")})},getOrgLists:function(){var n=this;this.$http({url:this.$http.adornUrl("/admin/tstation/org"),method:"post",data:this.$http.adornParams({})}).then(function(e){var t=e.data;t&&0===t.code&&(n.organizationOptions=t.list,0==n.secrchDataForm.orgSelectedOptions.length&&(n.secrchDataForm.orgSelectedOptions=JSON.parse(window.sessionStorage.getItem("userInfo")).orgId.split()))})},getCommconnectList:function(n){var e=this;n&&(this.pageIndex=1),this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/base/tchannel/list"),method:"post",data:this.$http.adornParams({pageNumber:this.pageIndex.toString(),pageSize:this.pageSize.toString(),entity:{orgId:0==this.secrchDataForm.orgSelectedOptions.length?JSON.parse(window.sessionStorage.getItem("userInfo")).orgId:this.secrchDataForm.orgSelectedOptions[this.secrchDataForm.orgSelectedOptions.length-1],connectType:this.secrchDataForm.connectTypeSelectedOptions,protocolId:this.secrchDataForm.protocolTypeSelectedOptions,channelName:this.secrchDataForm.channelName}})}).then(function(n){var t=n.data;t&&0===t.code?(e.connectDataList=t.page.list,e.totalPage=t.page.total,e.pageIndex=t.page.pageNum,e.pageSize=t.page.pageSize):(e.connectDataList=[],e.totalPage=0),e.dataListLoading=!1})},sizeChangeHandle:function(n){this.pageSize=n,this.pageIndex=1,this.getCommconnectList()},currentChangeHandle:function(n){this.pageIndex=n,this.getCommconnectList()},selectionChangeHandle:function(n){this.dataListSelections=n},addCommconnect:function(n){var e=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){this.$refs.dataFormSet.resetFields(),this.dataFormSet.pollingInteval="200"}),this.$http({url:this.$http.adornUrl("/admin/tprotocol/protocolname"),method:"post",data:this.$http.adornParams({})}).then(function(n){var t=n.data;t&&0===t.code&&(console.log(t.data),e.protocolTypeOptions=t.data)}),n?(this.$http({url:this.$http.adornUrl("/admin/tstation/orgName"),method:"post",data:this.$http.adornData({orgId:n.orgId})}).then(function(n){var t=n.data;t&&0===t.code?e.dataFormSet.setOrganizationOptions=t.list:e.dataFormSet.setOrganizationOptions=[]}),this.$http({url:this.$http.adornUrl("/base/tchannel/info?channelId="+n.channelId),method:"get",params:this.$http.adornParams()}).then(function(n){var t=n.data;t&&0===t.code?(e.saveRowDataChannelName=t.tChannel.channelName,e.saveRowDataChannelCode=t.tChannel.channelCode,e.saveRowDataConnectFlag=t.tChannel.connectFlag,e.dialogTitle=t.tChannel.channelId,e.dataFormSetsetOrganizationOptions=t.tChannel.orgId,e.dataFormSet.channelName=t.tChannel.channelName,e.dataFormSet.channelCode=t.tChannel.channelCode,e.dataFormSet.connectFlag=t.tChannel.connectFlag,e.dataFormSet.connectType=t.tChannel.connectType.toString(),e.dataFormSet.protocolId=t.tChannel.protocolId,e.dataFormSet.localConnectUrl=t.tChannel.localConnectUrl,e.dataFormSet.localPort=t.tChannel.localPort,e.dataFormSet.pollingInteval=t.tChannel.pollingInteval,e.dataFormSet.frontLogo=t.tChannel.scadaNo):e.dataFormSet=[]})):(this.dialogTitle=n,this.$http({url:this.$http.adornUrl("/base/tchannel/getChannelCode"),method:"get",params:this.$http.adornParams({})}).then(function(n){var t=n.data;t&&0===t.code&&(e.dataFormSet.channelCode=t.data)}))},deleteCommconnect:function(n){var e=this,t=n?[n]:this.dataListSelections.map(function(n){return n.channelId});this.$confirm("确定删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http({url:e.$http.adornUrl("/base/tchannel/delete"),method:"post",data:e.$http.adornData(t,!1)}).then(function(n){var t=n.data;t&&0===t.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.getCommconnectList()}}):e.$message.error(t.msg)})}).catch(function(){})},changeType:function(n){return 0===n.connectType?"redis-client":1===n.connectType?"TCP-server":2===n.connectType?"TCP-client":3===n.connectType?"RS485-TCP":4===n.connectType?"UDP":void 0},changeModel:function(n){return"1"===n.connectModel?"主":"2"===n.connectModel?"从":"-"},protocolType:function(n){return"0"===n.protocolId?"104主站协议":"1"===n.protocolId?"104从站协议":"2"===n.protocolId?"Redis主站协议":"3"===n.protocolId?"Redis从站协议":void 0}}},c={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"comm-connect",attrs:{id:"commConnect"}},[t("el-form",{staticClass:"device-form",attrs:{inline:!0,model:n.secrchDataForm},nativeOn:{keyup:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13,e.key))return null;n.getCommconnectList()}}},[t("el-form-item",{staticClass:"device-form-item"},[t("el-cascader",{attrs:{options:n.organizationOptions,"change-on-select":"",placeholder:"组织机构"},model:{value:n.secrchDataForm.orgSelectedOptions,callback:function(e){n.$set(n.secrchDataForm,"orgSelectedOptions",e)},expression:"secrchDataForm.orgSelectedOptions"}})],1),n._v(" "),t("el-form-item",{staticClass:"device-form-item"},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"选择连接类型"},model:{value:n.secrchDataForm.connectTypeSelectedOptions,callback:function(e){n.$set(n.secrchDataForm,"connectTypeSelectedOptions",e)},expression:"secrchDataForm.connectTypeSelectedOptions"}},n._l(n.connectTypeOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{staticClass:"device-form-item"},[t("el-select",{attrs:{clearable:"",filterable:"",placeholder:"选择协议名称"},nativeOn:{click:function(e){n.getProtocolTypeOptions()}},model:{value:n.secrchDataForm.protocolTypeSelectedOptions,callback:function(e){n.$set(n.secrchDataForm,"protocolTypeSelectedOptions",e)},expression:"secrchDataForm.protocolTypeSelectedOptions"}},n._l(n.protocolTypeOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{staticClass:"device-form-item"},[t("el-input",{attrs:{placeholder:"通道名称",clearable:""},model:{value:n.secrchDataForm.channelName,callback:function(e){n.$set(n.secrchDataForm,"channelName",e)},expression:"secrchDataForm.channelName"}})],1),n._v(" "),t("el-form-item",{staticClass:"device-form-item"},[t("el-button",{attrs:{type:"success"},on:{click:function(e){n.getCommconnectList("params")}}},[n._v("查询")]),n._v(" "),n.isAuth(n.OPTAUTH_ADD)?t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.addCommconnect()}}},[n._v("新增")]):n._e(),n._v(" "),n.isAuth(n.OPTAUTH_DELETE)?t("el-button",{attrs:{type:"danger",disabled:n.dataListSelections.length<=0},on:{click:function(e){n.deleteCommconnect()}}},[n._v("批量删除")]):n._e()],1)],1),n._v(" "),t("div",{staticClass:"connect-list"},[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:n.connectDataList,border:"","header-cell-style":{background:"#edeef0",color:"#000",fontSize:"14px",height:"40px"},"row-style":{height:"36px"},"max-height":n.connectTableHeight},on:{"selection-change":n.selectionChangeHandle}},[t("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),n._v(" "),t("el-table-column",{attrs:{type:"index","header-align":"center",align:"center",width:"80",label:"序号"}}),n._v(" "),t("el-table-column",{attrs:{prop:"orgName","header-align":"center",align:"center","min-width":"150",label:"组织机构名称"}}),n._v(" "),t("el-table-column",{attrs:{prop:"channelName","header-align":"center",align:"center","min-width":"120",label:"通道名称"}}),n._v(" "),t("el-table-column",{attrs:{prop:"channelCode","header-align":"center",align:"center","min-width":"120",label:"通道编号"}}),n._v(" "),t("el-table-column",{attrs:{prop:"connectFlag","header-align":"center",align:"center","min-width":"120",label:"连接标识"}}),n._v(" "),t("el-table-column",{attrs:{prop:"connectType",formatter:n.changeType,"header-align":"center",align:"center","min-width":"120",label:"连接类型"}}),n._v(" "),t("el-table-column",{attrs:{prop:"protocolName","header-align":"center",align:"center","min-width":"120",label:"协议名称"}}),n._v(" "),t("el-table-column",{attrs:{prop:"localConnectUrl","header-align":"center",align:"center","min-width":"120",label:"本地IP"}}),n._v(" "),t("el-table-column",{attrs:{prop:"localPort","header-align":"center",align:"center","min-width":"120",label:"本地端口"}}),n._v(" "),t("el-table-column",{attrs:{prop:"pollingInteval","header-align":"center",align:"center","min-width":"180",label:"轮询间隔时间（毫秒）"}}),n._v(" "),t("el-table-column",{attrs:{prop:"scadaNo","header-align":"center",align:"center","min-width":"80",label:"前置标识"}}),n._v(" "),t("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"150",label:"操作"},scopedSlots:n._u([{key:"default",fn:function(e){return[n.isAuth(n.OPTAUTH_UPDATE)?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){n.addCommconnect(e.row)}}},[t("i",{staticClass:"el-icon-edit-outline istyle"})]):n._e(),n._v(" "),n.isAuth(n.OPTAUTH_DELETE)?t("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){n.deleteCommconnect(e.row.channelId)}}},[t("i",{staticClass:"el-icon-delete istyle"})]):n._e()]}}])})],1),n._v(" "),t("el-pagination",{attrs:{"current-page":n.pageIndex,"page-sizes":[10,20,50,100],"page-size":n.pageSize,total:n.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":n.sizeChangeHandle,"current-change":n.currentChangeHandle}})],1),n._v(" "),t("el-dialog",{attrs:{title:void 0==n.dialogTitle?"新  增":"修  改","close-on-click-modal":!1,visible:n.addOrUpdateVisible,center:"center"},on:{"update:visible":function(e){n.addOrUpdateVisible=e}}},[t("el-form",{ref:"dataFormSet",staticClass:"set-device-form",attrs:{model:n.dataFormSet,"label-width":"80px",rules:n.dataFormSetRule},nativeOn:{keyup:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13,e.key))return null;n.dataFormSubmit()}}},[t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"组织机构",prop:"setOrganizationOptions"}},[t("el-cascader",{attrs:{options:n.organizationOptions,"change-on-select":""},model:{value:n.dataFormSet.setOrganizationOptions,callback:function(e){n.$set(n.dataFormSet,"setOrganizationOptions",e)},expression:"dataFormSet.setOrganizationOptions"}})],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{prop:"channelName",label:"通道名称"}},[t("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:n.dataFormSet.channelName,callback:function(e){n.$set(n.dataFormSet,"channelName",e)},expression:"dataFormSet.channelName"}})],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"通道编号",prop:"channelCode"}},[t("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:n.dataFormSet.channelCode,callback:function(e){n.$set(n.dataFormSet,"channelCode",e)},expression:"dataFormSet.channelCode"}})],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"连接标识",prop:"connectFlag"}},[t("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:n.dataFormSet.connectFlag,callback:function(e){n.$set(n.dataFormSet,"connectFlag",e)},expression:"dataFormSet.connectFlag"}})],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"连接类型",prop:"connectType"}},[t("el-select",{model:{value:n.dataFormSet.connectType,callback:function(e){n.$set(n.dataFormSet,"connectType",e)},expression:"dataFormSet.connectType"}},n._l(n.connectTypeOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"协议名称",prop:"protocolId"}},[t("el-select",{model:{value:n.dataFormSet.protocolId,callback:function(e){n.$set(n.dataFormSet,"protocolId",e)},expression:"dataFormSet.protocolId"}},n._l(n.protocolTypeOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"本地IP",prop:"localConnectUrl"}},[t("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:n.dataFormSet.localConnectUrl,callback:function(e){n.$set(n.dataFormSet,"localConnectUrl",e)},expression:"dataFormSet.localConnectUrl"}})],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"本地端口",prop:"localPort"}},[t("el-input",{attrs:{placeholder:"请输入内容",clearable:"",type:"number",min:"1"},model:{value:n.dataFormSet.localPort,callback:function(e){n.$set(n.dataFormSet,"localPort",e)},expression:"dataFormSet.localPort"}})],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"轮询间隔时间（毫秒）"}},[t("el-input-number",{attrs:{step:100,min:1},model:{value:n.dataFormSet.pollingInteval,callback:function(e){n.$set(n.dataFormSet,"pollingInteval",e)},expression:"dataFormSet.pollingInteval"}})],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"前置标识",prop:"frontLogo"}},[t("el-input",{attrs:{placeholder:"请输入内容",clearable:"",type:"number",min:"1"},model:{value:n.dataFormSet.frontLogo,callback:function(e){n.$set(n.dataFormSet,"frontLogo",e)},expression:"dataFormSet.frontLogo"}})],1)],1),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.addOrUpdateVisible=!1}}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.dataFormSubmit(n.dataFormSet)}}},[n._v("确定")])],1)],1)],1)},staticRenderFns:[]};var i=t("46Yf")(r,c,!1,function(n){t("LBIj")},"data-v-ee8b1d22",null);e.default=i.exports}});