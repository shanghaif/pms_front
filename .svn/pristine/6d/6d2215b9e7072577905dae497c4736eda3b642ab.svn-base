webpackJsonp([59],{"5G4i":function(n,e,t){var i=t("95hK");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("XkoO")("017045fa",i,!0)},"95hK":function(n,e,t){(n.exports=t("acE3")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/* 搜索条件栏样式开始 */\n.device-form[data-v-60ed9b9a] {\r\n  background-color: #eef4fa;\r\n  border-radius: 5px 5px 0 0;\r\n /*  margin-bottom: 10px; */\r\n  height: 80px;\r\n  width: 100%;\r\n  padding: 0 10px 0 10px;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n  text-align: justify\n}\n.device-form-item[data-v-60ed9b9a] {\r\n  margin-bottom: 0;\r\n  /* flex: 1 */\n}\n.device-form-item a[data-v-60ed9b9a], .set-device-form-item a[data-v-60ed9b9a] {\r\n  font-weight: 600;\r\n  font-size: 15px\n}\r\n/* 搜索条件栏样式结束 */\r\n/* 表格样式开始 */\r\n/* 表格样式结束 */\r\n/* 增加修改配置页面样式开始 */\r\n/* .redius >>> .el-dialog {\r\n  height: 70%;\r\n}\r\n.redius >>> .el-dialog .el-dialog__body {\r\n  height: 80%;\r\n} */\n.set-device-form[data-v-60ed9b9a] {\r\n  background-color: #eef4fa;\r\n  border-radius: 5px;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: vertical;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: column;\r\n          flex-direction: column;\r\n  width: 100%;\r\n  padding: 20px 0 0 0;\r\n  /* height: 100%;\r\n  overflow-y: auto */\n}\n.set-device-form-item[data-v-60ed9b9a] .el-form-item__content {\r\n  width: 50%;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-orient: horizontal;\r\n  -webkit-box-direction: normal;\r\n      -ms-flex-direction: row;\r\n          flex-direction: row;\n}\n.set-device-form-item[data-v-60ed9b9a] .el-form-item__label {\r\n  min-width: 180px\n}\r\n/* .set-device-form-item a {\r\n  flex: 1;\r\n  min-width: 160px;\r\n  text-decoration: none\r\n} */\n.set-device-form-item[data-v-60ed9b9a] .el-select, .set-device-form-item[data-v-60ed9b9a] .el-cascader, .set-device-form-item[data-v-60ed9b9a] .el-input, .set-device-form-item[data-v-60ed9b9a] .el-input-number {\r\n  -webkit-box-flex: 2;\r\n      -ms-flex: 2;\r\n          flex: 2\n}\r\n/* 增加修改配置页面样式结束 */\r\n",""])},VWmh:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){var n=this;return{isDisabled:!0,rediusTableHeight:"",setRediusSubDataForm:{setOrganizationOptions:[],channelId:null,password:null,passwordtoo:null,reportTime:300},rediussunDataFormSetRule:{setOrganizationOptions:[{required:!0,message:"组织机构不能为空",trigger:"blur"}],channelId:[{required:!0,message:"通道标识不能为空",trigger:"blur"}],password:[{required:!0,message:"新密码不能为空",trigger:"blur"}],passwordtoo:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{validator:function(e,t,i){n.setRediusSubDataForm.password!==t?i(new Error("确认密码与新密码不一致")):i()},trigger:"blur"}]},dialogTitle:"",secrchRediusSubForm:{orgSelectedOptions:[],channelSelectedOptions:null},organizationOptions:[],channelOptions:[],rediusDataList:[],pageIndex:1,pageSize:10,totalPage:2,dataListSelections:[],addOrUpdateVisible:!1,dataListLoading:!1,agreementLoading:!1}},created:function(){this.rediusTableHeight=window.innerHeight-320},mounted:function(){this.getOrgLists(),this.getRediusSubList(),window.onresize=function(){document.getElementById("rediusSub")&&(this.rediusTableHeight=window.innerHeight-320)}},methods:{dataFormSubmit:function(n){var e=this;this.$refs.setRediusSubDataForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;e.$confirm("确定提交?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http({url:e.$http.adornUrl("/admin/tprotocolredisslave/"+(void 0==e.dialogTitle?"save":"update")),method:"post",data:e.$http.adornData({id:void 0==e.dialogTitle?null:e.dialogTitle,channelId:n.channelId,password:n.password,reportTime:n.reportTime})}).then(function(n){var t=n.data;t&&0===t.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){if(e.addOrUpdateVisible=!1,void 0==e.dialogTitle)e.rediusDataList.unshift(t.entity);else for(var n=0;n<e.rediusDataList.length;n++)e.rediusDataList[n].id==t.entity.id&&(e.rediusDataList[n].channelId=t.entity.channelId,e.rediusDataList[n].channelName=t.entity.channelName,e.rediusDataList[n].id=t.entity.id,e.rediusDataList[n].orgId=t.entity.orgId,e.rediusDataList[n].password=t.entity.password,e.rediusDataList[n].reportTime=t.entity.reportTime)}}):e.$message.error(t.msg)})})})},getOrgLists:function(){var n=this;this.$http({url:this.$http.adornUrl("/admin/tstation/org"),method:"post",data:this.$http.adornParams({})}).then(function(e){var t=e.data;t&&0===t.code&&(n.organizationOptions=t.list,n.secrchRediusSubForm.orgSelectedOptions=JSON.parse(window.sessionStorage.getItem("userInfo")).orgId.split())})},getChannel:function(){var n=this,e=this.addOrUpdateVisible?this.setRediusSubDataForm.setOrganizationOptions[this.setRediusSubDataForm.setOrganizationOptions.length-1]:this.secrchRediusSubForm.orgSelectedOptions[this.secrchRediusSubForm.orgSelectedOptions.length-1];this.agreementLoading=!0,this.$http({url:this.$http.adornUrl("/admin/tprotocolredismaster/channel"),method:"post",data:this.$http.adornParams({orgId:e})}).then(function(e){var t=e.data;t&&0===t.code&&(n.agreementLoading=!1,n.channelOptions=t.list)})},getRediusSubList:function(n){var e=this;n&&(this.pageIndex=1),this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/admin/tprotocolredisslave/list"),method:"post",data:this.$http.adornParams({page:this.pageIndex.toString(),limit:this.pageSize.toString(),orgId:0==this.secrchRediusSubForm.orgSelectedOptions.length?JSON.parse(window.sessionStorage.getItem("userInfo")).orgId:this.secrchRediusSubForm.orgSelectedOptions[this.secrchRediusSubForm.orgSelectedOptions.length-1],channelId:this.secrchRediusSubForm.channelSelectedOptions})}).then(function(n){var t=n.data;t&&0===t.code?(e.rediusDataList=t.page.list,e.totalPage=t.page.totalCount,e.pageIndex=t.page.currPage,e.pageSize=t.page.pageSize):(e.rediusDataList=[],e.totalPage=0),e.dataListLoading=!1})},sizeChangeHandle:function(n){this.pageSize=n,this.pageIndex=1,this.$options.methods.getRediusSubList.bind(this)()},currentChangeHandle:function(n){this.pageIndex=n,this.$options.methods.getRediusSubList.bind(this)()},selectionChangeHandle:function(n){this.dataListSelections=n},addRediusSub:function(n){var e=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){this.$refs.setRediusSubDataForm.resetFields(),this.setRediusSubDataForm.setOrganizationOptions=[]}),n?(this.isDisabled=!0,this.$options.methods.getChannel.bind(this)(),this.$http({url:this.$http.adornUrl("/admin/tstation/orgName"),method:"post",data:this.$http.adornData({orgId:n.orgId})}).then(function(n){var t=n.data;t&&0===t.code?e.setRediusSubDataForm.setOrganizationOptions=t.list:e.setRediusSubDataForm.setOrganizationOptions=[]}),this.$nextTick(function(){this.dialogTitle=n.id,this.setRediusSubDataForm.channelId=n.channelId.toString(),this.setRediusSubDataForm.password=n.password,this.setRediusSubDataForm.passwordtoo=n.password,this.setRediusSubDataForm.reportTime=n.reportTime})):(this.dialogTitle=n,this.isDisabled=!1)},deleteRediusSub:function(n){var e=this,t=n?[n]:this.dataListSelections.map(function(n){return n.id});this.$confirm("确定删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http({url:e.$http.adornUrl("/admin/tprotocolredisslave/delete"),method:"post",data:e.$http.adornData(t,!1)}).then(function(n){var t=n.data;t&&0===t.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.getRediusSubList()}}):e.$message.error(t.msg)})}).catch(function(){})}}},a={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"rediussub",attrs:{id:"rediusSub"}},[t("el-form",{staticClass:"device-form",attrs:{inline:!0,model:n.secrchRediusSubForm},nativeOn:{keyup:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13,e.key))return null;n.getRediusSubList()}}},[t("el-form-item",{staticClass:"device-form-item"},[t("el-cascader",{attrs:{options:n.organizationOptions,"change-on-select":"",placeholder:"选择组织机构"},model:{value:n.secrchRediusSubForm.orgSelectedOptions,callback:function(e){n.$set(n.secrchRediusSubForm,"orgSelectedOptions",e)},expression:"secrchRediusSubForm.orgSelectedOptions"}})],1),n._v(" "),t("el-form-item",{staticClass:"device-form-item"},[t("el-select",{attrs:{filterable:"",clearable:"",placeholder:"选择通道标识",loading:n.agreementLoading},nativeOn:{click:function(e){n.getChannel()}},model:{value:n.secrchRediusSubForm.channelSelectedOptions,callback:function(e){n.$set(n.secrchRediusSubForm,"channelSelectedOptions",e)},expression:"secrchRediusSubForm.channelSelectedOptions"}},n._l(n.channelOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{staticClass:"device-form-item"},[t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.getRediusSubList("params")}}},[n._v("查询")]),n._v(" "),n.isAuth(n.OPTAUTH_ADD)?t("el-button",{attrs:{type:"success"},on:{click:function(e){n.addRediusSub()}}},[n._v("新增")]):n._e(),n._v(" "),n.isAuth(n.OPTAUTH_DELETE)?t("el-button",{attrs:{type:"danger",disabled:n.dataListSelections.length<=0},on:{click:function(e){n.deleteRediusSub()}}},[n._v("批量删除")]):n._e()],1)],1),n._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{"max-height":n.rediusTableHeight,data:n.rediusDataList,border:"",stripe:"","row-class-name":n.tableRowClassName},on:{"selection-change":n.selectionChangeHandle}},[t("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),n._v(" "),t("el-table-column",{attrs:{type:"index","header-align":"center",align:"center",width:"80",label:"序号"}}),n._v(" "),t("el-table-column",{attrs:{prop:"channelName","header-align":"center",align:"center","min-width":"120",label:"通道名称"}}),n._v(" "),t("el-table-column",{attrs:{prop:"password","header-align":"center",align:"center","min-width":"120",label:"redis登陆密码"}}),n._v(" "),t("el-table-column",{attrs:{prop:"reportTime","header-align":"center",align:"center","min-width":"120",label:"全数据上报间隔（秒）"}}),n._v(" "),t("el-table-column",{attrs:{fixed:"right","header-align":"center",align:"center",width:"150",label:"操作"},scopedSlots:n._u([{key:"default",fn:function(e){return[n.isAuth(n.OPTAUTH_UPDATE)?t("el-button",{attrs:{plain:!0,type:"warning",size:"mini"},on:{click:function(t){n.addRediusSub(e.row)}}},[n._v("修改")]):n._e(),n._v(" "),n.isAuth(n.OPTAUTH_DELETE)?t("el-button",{attrs:{plain:!0,type:"danger",size:"mini"},on:{click:function(t){n.deleteRediusSub(e.row.id)}}},[n._v("删除")]):n._e()]}}])})],1),n._v(" "),t("el-pagination",{attrs:{"current-page":n.pageIndex,"page-sizes":[10,20,50,100],"page-size":n.pageSize,total:n.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":n.sizeChangeHandle,"current-change":n.currentChangeHandle}}),n._v(" "),t("el-dialog",{attrs:{title:void 0==n.dialogTitle?"新  增":"修  改","close-on-click-modal":!1,visible:n.addOrUpdateVisible,center:"center"},on:{"update:visible":function(e){n.addOrUpdateVisible=e}}},[t("el-form",{ref:"setRediusSubDataForm",staticClass:"set-device-form",attrs:{model:n.setRediusSubDataForm,"label-width":"80px",rules:n.rediussunDataFormSetRule},nativeOn:{keyup:function(e){if(!("button"in e)&&n._k(e.keyCode,"enter",13,e.key))return null;n.dataFormSubmit()}}},[t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"组织机构",prop:"setOrganizationOptions"}},[t("el-cascader",{attrs:{options:n.organizationOptions,"change-on-select":"",disabled:n.isDisabled},model:{value:n.setRediusSubDataForm.setOrganizationOptions,callback:function(e){n.$set(n.setRediusSubDataForm,"setOrganizationOptions",e)},expression:"setRediusSubDataForm.setOrganizationOptions"}})],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{prop:"channelId",label:"通道名称"}},[t("el-select",{attrs:{placeholder:"请选择"},nativeOn:{click:function(e){n.getChannel()}},model:{value:n.setRediusSubDataForm.channelId,callback:function(e){n.$set(n.setRediusSubDataForm,"channelId",e)},expression:"setRediusSubDataForm.channelId"}},n._l(n.channelOptions,function(n){return t("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"redis登陆密码",prop:"password"}},[t("el-input",{attrs:{placeholder:"请输入密码",type:"password",clearable:""},model:{value:n.setRediusSubDataForm.password,callback:function(e){n.$set(n.setRediusSubDataForm,"password",e)},expression:"setRediusSubDataForm.password"}})],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"再次输入登陆密码",prop:"passwordtoo"}},[t("el-input",{attrs:{placeholder:"请输入密码",type:"password",clearable:""},model:{value:n.setRediusSubDataForm.passwordtoo,callback:function(e){n.$set(n.setRediusSubDataForm,"passwordtoo",e)},expression:"setRediusSubDataForm.passwordtoo"}})],1),n._v(" "),t("el-form-item",{staticClass:"set-device-form-item",attrs:{label:"全数据上报间隔（秒）",prop:"reportTime"}},[t("el-input-number",{attrs:{step:1,min:1},model:{value:n.setRediusSubDataForm.reportTime,callback:function(e){n.$set(n.setRediusSubDataForm,"reportTime",e)},expression:"setRediusSubDataForm.reportTime"}})],1)],1),n._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){n.addOrUpdateVisible=!1}}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.dataFormSubmit(n.setRediusSubDataForm)}}},[n._v("确定")])],1)],1)],1)},staticRenderFns:[]};var s=t("46Yf")(i,a,!1,function(n){t("5G4i")},"data-v-60ed9b9a",null);e.default=s.exports}});